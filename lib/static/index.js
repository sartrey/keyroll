!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=10)}([function(e,t){e.exports=React},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},f=function(e){return e.replace(/~/g,"~1").replace(/\./g,"~0")},l=function(e){return e.replace(/~0/g,".").replace(/~1/g,"~")},p=function(e){if(Array.isArray(e))return e;if("string"==typeof e)return e.length?-1!==e.indexOf("~")?e.split(".").map(l):e.split("."):[];throw Error("State.prototype.cursor only accept string or array, "+(void 0===e?"undefined":i(e))+" is forbidden")},y=function(e){if("string"==typeof e)return e;if(Array.isArray(e))return e.map(f).join(".");throw Error("State.prototype.cursor only accept string or array, "+(void 0===e?"undefined":i(e))+" is forbidden")},h=function(e){return null==e},d=function(e){return"object"===(void 0===e?"undefined":i(e))&&null!==e},m=function(e){return!isNaN(e)&&""!==e},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Array.isArray(e)?[].concat(s(e)):d(e)?a({},e):m(t)?[]:{}},b=1,_=function(){return b+=1},g=function(e,t){var n=e.indexOf(t);if(-1!==n){for(var r=n,o=r+1,i=e.length;o<i;r+=1,o+=1)e[r]=e[o];e.pop()}},w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.data,r=t.maxSnapshots,o=void 0===r?1/0:r;u(this,e),this.__data=n,this.__maxSnapshots=o,this.__snapshots=[],this.__snapshotIndex=-1}return c(e,[{key:"read",value:function(e){return function(e,t){for(var n=e,r=0;r<t.length;r+=1){var o=t[r];if(h(n))return;n=n[o]}return n}(this.__data,e)}},{key:"write",value:function(e,t){this.__data=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments[2];if(!t.length)return n;var r={};r.HEAD=e;for(var o=r,i="HEAD",u=e,c=0;c<t.length;c+=1){var a=t[c];o[i]=v(u,a),o=o[i],i=a,u=h(u)?null:u[a]}return o[i]=n,r.HEAD}(this.__data,e,t)}},{key:"snapshot",value:function(){this.__snapshotIndex+=1,this.__snapshots[this.__snapshotIndex]=this.__data,this.__snapshots.length=this.__snapshotIndex+1,this.__snapshots.length>this.maxSnapshots&&(this.__snapshots.shift(),this.__snapshotIndex-=1)}},{key:"canUndo",value:function(){return this.__snapshotIndex>0}},{key:"undo",value:function(){if(!this.canUndo())throw new RangeError("no more snapshot available");this.__snapshotIndex-=1,this.__data=this.__snapshots[this.__snapshotIndex]}},{key:"canRedo",value:function(){return this.__snapshotIndex+1<this.__snapshots.length}},{key:"redo",value:function(){if(!this.canRedo())throw new RangeError("no more snapshot available");this.__snapshotIndex+=1,this.__data=this.__snapshots[this.__snapshotIndex]}}]),e}(),O=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&void 0===e.__noflux_id&&Object.defineProperty(e,"__noflux_id",{enumerable:!1,writable:!0,configurable:!0,value:_()}),e.__noflux_id},E=function e(){u(this,e),this.children={},this.subtreeListeners=[],this.ownListeners=[]},S=function(){function e(){u(this,e),this.__tree=new E}return c(e,[{key:"__traverse",value:function(e){var t=e.path,n=e.createEmptyPath,r=void 0!==n&&n,o=e.callbackBeforeRecursion,i=e.callbackAfterRecursion,u=e.callbackAtBottom,c=this.__tree,a=[];a.push(c);for(var s=0;s<=t.length;s+=1){if((s===t.length||!r&&void 0===c.children[t[s]])&&u){u(c,s);break}o&&o(c);var f=t[s];void 0===c.children[f]&&(c.children[f]=new E),c=c.children[f],a.push(c)}if(i)for(;a.length;)i(c=a.pop())}},{key:"addListener",value:function(e,t){var n=this;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return O(t,!0),this.__traverse({path:e,createEmptyPath:!0,callbackAfterRecursion:function(e){return e.subtreeListeners.push(t)},callbackAtBottom:function(e){return e.ownListeners.push(t)}}),function(){n.removeListener(e,t)}}},{key:"removeListener",value:function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');this.__traverse({path:e,callbackAfterRecursion:function(e){return g(e.subtreeListeners,t)},callbackAtBottom:function(e){return g(e.ownListeners,t)}})}},{key:"emit",value:function(e,t){var n=[];this.__traverse({path:e,callbackAtBottom:function(t,r){r===e.length&&n.push.apply(n,s(t.subtreeListeners))},callbackAfterRecursion:function(e){e.ownListeners.length&&n.push.apply(n,s(e.ownListeners))}});for(var r={},o=0;o<n.length;o+=1){var i=n[o],u=O(i);r[u]||(r[u]=!0,i(t))}}},{key:"on",value:function(e,t){return this.addListener(e,t)}},{key:"off",value:function(e,t){this.removeListener(e,t)}}]),e}(),k=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.store,r=void 0===n?new w:n,o=t.cursor,i=void 0===o?[]:o,c=t.emitters,a=void 0===c?{get:new S,set:new S}:c;u(this,e),this.__store=r,this.__cursor=i,this.__emitters=a}return c(e,[{key:"cursor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.__store,r=this.__cursor,o=this.__emitters;return t=p(t),new e({store:n,cursor:r.concat(t),emitters:o})}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length;if(0!==t)return this.cursor(e).get();var n=this.__store.read(this.__cursor);return this.__emitters.get.emit(this.__cursor,{path:y(this.__cursor),value:n}),n}},{key:"set",value:function(e,t){var n=arguments.length;if(n<1)throw new TypeError("value argument must be set");if(1===n){var r=[void 0,e];e=r[0],t=r[1]}if(void 0!==e)return this.cursor(e).set(t);this.__store.write(this.__cursor,t),this.__emitters.set.emit(this.__cursor,{path:y(this.__cursor),value:t})}},{key:"update",value:function(e,t){var n=arguments.length;if(n<1)throw new TypeError("callback argument must be set");if(1===n){var r=[void 0,e];e=r[0],t=r[1]}if("function"!=typeof t)throw new TypeError("callback argument must be a function");var o=void 0===e?this:this.cursor(e);o.set(t(o.get()))}},{key:"__getEmitterByName",value:function(e){if(!this.__emitters[e])throw new Error("event not allowed");return this.__emitters[e]}},{key:"on",value:function(e,t){return this.__getEmitterByName(e).on(this.__cursor,t)}},{key:"addEventListener",value:function(e,t){return this.on(e,t)}},{key:"off",value:function(e,t){this.__getEmitterByName(e).off(this.__cursor,t)}},{key:"removeEventListener",value:function(e,t){this.off(e,t)}},{key:"snapshot",value:function(){this.__store.snapshot()}},{key:"canUndo",value:function(){return this.__store.canUndo()}},{key:"undo",value:function(){this.__store.undo(),this.__emitters.set.emit([],{path:y([]),value:this.__store.read([])})}},{key:"canRedo",value:function(){return this.__store.canRedo()}},{key:"redo",value:function(){this.__store.redo(),this.__emitters.set.emit([],{path:y([]),value:this.__store.read([])})}},{key:"__arrayOperator",value:function(e,t){var n,r=(n=this.get(),h(n)?[]:[].concat(s(n)));Array.prototype[e].apply(r,t),this.set(r)}},{key:"push",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.__arrayOperator("push",t)}},{key:"pop",value:function(){this.__arrayOperator("pop")}},{key:"unshift",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.__arrayOperator("unshift",t)}},{key:"shift",value:function(){this.__arrayOperator("shift")}},{key:"fill",value:function(e){this.__arrayOperator("fill",[e])}},{key:"reverse",value:function(){this.__arrayOperator("reverse")}},{key:"splice",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.__arrayOperator("splice",t)}}]),e}()),j="undefined"!=typeof performance&&performance&&performance.now?performance:Date,P=function(e){var t=e.prototype&&e.prototype.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||"Component"},R=!("undefined"==typeof window||!window.document||!window.document.createElement),x="function"==typeof Symbol&&Symbol.for?Symbol.for("noflux"):"__noflux",A=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},C=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),T=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var u=o.get;return void 0!==u?u.call(r):void 0},D=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},I=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},U=function(e){if(e[x])throw new SyntaxError("You should not use @connect for component "+P(e)+" more than once.");if(e[x]={},!R)return e;var t=function(t){function n(e){A(this,n);var t=I(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t[x]={getPaths:{},onSetDisposers:[],mounted:!1,isForcingUpdate:!1};var r=t[x],o=function(){if(r.mounted&&!r.isForcingUpdate){r.isForcingUpdate=!0;j.now();t.forceUpdate((function(){r.isForcingUpdate=!1;j.now()}))}};return r.onGetDisposer=k.on("get",(function(e){var t=e.path;r.isRendering&&!r.getPaths[t]&&(r.getPaths[t]=!0,r.onSetDisposers.push(k.cursor(t).on("set",o)))})),t}return D(n,t),C(n,[{key:"componentDidMount",value:function(){this[x].mounted=!0,T(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"componentDidMount",this)&&T(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"componentDidMount",this).call(this)}},{key:"componentWillUnmount",value:function(){var e=this[x];e.onSetDisposers.forEach((function(e){return e()})),e.onGetDisposer(),e.mounted=!1,T(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"componentWillUnmount",this)&&T(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"componentWillUnmount",this).call(this)}},{key:"render",value:function(){if(!T(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"render",this))throw new Error("No render method found on the returned component instance of "+P(e)+", you may have forgotten to define render.");var t=this[x];t.isRendering=!0;var r=T(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"render",this).call(this);return t.isRendering=!1,r}}]),n}(e);return t.displayName="Connect("+P(e)+")",t},N=function(e,t,n){if(!e)throw new TypeError("@connect() is invalid, do you mean @connect ?");if(o=e,Boolean(o&&"function"==typeof o.render)&&t&&n)throw new SyntaxError("@connect should not be used for component method.");var o,i;if(i=e,!Boolean(i&&i.prototype&&"function"==typeof i.prototype.render)){if("function"!=typeof e)throw new TypeError("@connect should be used for React component");var u=function(t){function n(){return A(this,n),I(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return D(n,t),C(n,[{key:"render",value:function(){return e.call(this,this.props,this.context)}}]),n}(r.Component);return u.displayName="Connect("+P(e)+")",u.contextTypes=e.contextTypes,u.propTypes=e.propTypes,u.defaultProps=e.defaultProps,U(u)}return U(e)},B="URLSearchParams"in self,L="Symbol"in self&&"iterator"in Symbol,F="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),M="FormData"in self,$="ArrayBuffer"in self;if($)var V=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],H=ArrayBuffer.isView||function(e){return e&&V.indexOf(Object.prototype.toString.call(e))>-1};function q(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function K(e){return"string"!=typeof e&&(e=String(e)),e}function z(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return L&&(t[Symbol.iterator]=function(){return t}),t}function G(e){this.map={},e instanceof G?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function W(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function J(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function X(e){var t=new FileReader,n=J(t);return t.readAsArrayBuffer(e),n}function Q(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function Y(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:F&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:M&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:B&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():$&&F&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=Q(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):$&&(ArrayBuffer.prototype.isPrototypeOf(e)||H(e))?this._bodyArrayBuffer=Q(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):B&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},F&&(this.blob=function(){var e=W(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?W(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(X)}),this.text=function(){var e,t,n,r=W(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=J(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},M&&(this.formData=function(){return this.text().then(te)}),this.json=function(){return this.text().then(JSON.parse)},this}G.prototype.append=function(e,t){e=q(e),t=K(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},G.prototype.delete=function(e){delete this.map[q(e)]},G.prototype.get=function(e){return e=q(e),this.has(e)?this.map[e]:null},G.prototype.has=function(e){return this.map.hasOwnProperty(q(e))},G.prototype.set=function(e,t){this.map[q(e)]=K(t)},G.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},G.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),z(e)},G.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),z(e)},G.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),z(e)},L&&(G.prototype[Symbol.iterator]=G.prototype.entries);var Z=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function ee(e,t){var n,r,o=(t=t||{}).body;if(e instanceof ee){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new G(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new G(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),Z.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function te(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function ne(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new G(t.headers),this.url=t.url||"",this._initBody(e)}ee.prototype.clone=function(){return new ee(this,{body:this._bodyInit})},Y.call(ee.prototype),Y.call(ne.prototype),ne.prototype.clone=function(){return new ne(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new G(this.headers),url:this.url})},ne.error=function(){var e=new ne(null,{status:0,statusText:""});return e.type="error",e};var re=[301,302,303,307,308];ne.redirect=function(e,t){if(-1===re.indexOf(t))throw new RangeError("Invalid status code");return new ne(null,{status:t,headers:{location:e}})};var oe=self.DOMException;try{new oe}catch(e){(oe=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),oe.prototype.constructor=oe}function ie(e,t){return new Promise((function(n,r){var o=new ee(e,t);if(o.signal&&o.signal.aborted)return r(new oe("Aborted","AbortError"));var i=new XMLHttpRequest;function u(){i.abort()}i.onload=function(){var e,t,r={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",t=new G,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}})),t)};r.url="responseURL"in i?i.responseURL:r.headers.get("X-Request-URL");var o="response"in i?i.response:i.responseText;n(new ne(o,r))},i.onerror=function(){r(new TypeError("Network request failed"))},i.ontimeout=function(){r(new TypeError("Network request failed"))},i.onabort=function(){r(new oe("Aborted","AbortError"))},i.open(o.method,o.url,!0),"include"===o.credentials?i.withCredentials=!0:"omit"===o.credentials&&(i.withCredentials=!1),"responseType"in i&&F&&(i.responseType="blob"),o.headers.forEach((function(e,t){i.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",u),i.onreadystatechange=function(){4===i.readyState&&o.signal.removeEventListener("abort",u)}),i.send(void 0===o._bodyInit?null:o._bodyInit)}))}function ue(e,t){return console.warn(`action [${e}] <=`,t),fetch("/__/data/"+e,{method:"POST",body:JSON.stringify(t)}).then(e=>e.json()).then(t=>{if(0===t.state)return console.warn(`action [${e}] =>`,t.model),t.model;throw console.error(`action [${e}] =>`,t.error),console.warn(t.stack),new Error("server error")})}ie.polyfill=!0,self.fetch||(self.fetch=ie,self.Headers=G,self.Request=ee,self.Response=ne);const ce={scanDevices:async e=>{const t=e;if(t.length>0){const e=t[0];e.selected=!0,await ae.findVolumns({device:{name:e.name}})}k.set("devices",t)},lockDevice:e=>{const t=e,n=k.get("devices").map(e=>e.name===t.name?t:e);k.set("devices",n)},unlockDevice:e=>{const t=e,n=k.get("devices").map(e=>e.name===t.name?t:e);k.set("devices",n)},findVolumns:e=>{const t=e;k.set("volumns",t)},findRecords:e=>{const t=e;k.set("records",t)},killRecord:e=>{}},ae=new Proxy({},{get:(e,t)=>async e=>{const n=await ue(t,e),r=ce[t];return r&&await r(n),n}}),se={initialize:function(){k.set({devices:[],volumns:[],records:[]})},raiseQuery:ue,action:ae};n(1);function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=me(e);if(t){var o=me(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return de(this,n)}}function de(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(u,e);var t,n,r,i=he(u);function u(){return le(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){var e=this.props.name;return o.a.createElement("i",{className:"icon"},e)}}])&&pe(t.prototype,n),r&&pe(t,r),u}(r.Component);n(2);function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Se(e);if(t){var o=Se(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ee(this,n)}}function Ee(e,t){return!t||"object"!==be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(c,e);var t,n,i,u=Oe(c);function c(){return _e(this,c),u.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.size,n=e.icon,i=e.children;return o.a.createElement("button",{className:Object(r.cls)("button",t),onClick:this.props.onClick},o.a.createElement(ve,{name:n}),i&&o.a.createElement("span",null,i))}}])&&ge(t.prototype,n),i&&ge(t,i),c}(r.Component);n(3);function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Te(e);if(t){var o=Te(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ce(this,n)}}function Ce(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var De=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(u,e);var t,n,r,i=Ae(u);function u(){return Pe(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){var e=this.props,t=(e.type,e.defaultValue),n=e.onChange;return o.a.createElement("input",{className:"input",defaultValue:t,onChange:n})}}])&&Re(t.prototype,n),r&&Re(t,r),u}(r.Component);n(4);function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e,t,n,r,o,i,u){try{var c=e[i](u),a=c.value}catch(e){return void n(e)}c.done?t(a):Promise.resolve(a).then(r,o)}function Ne(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function u(e){Ue(i,r,o,u,c,"next",e)}function c(e){Ue(i,r,o,u,c,"throw",e)}u(void 0)}))}}function Be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ve(e);if(t){var o=Ve(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $e(this,n)}}function $e(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var He=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(a,e);var t,n,r,i,u,c=Me(a);function a(){return Be(this,a),c.apply(this,arguments)}return t=a,(n=[{key:"componentDidMount",value:(u=Ne((function*(){yield ae.scanDevices()})),function(){return u.apply(this,arguments)})},{key:"lockDevice",value:(i=Ne((function*(e){if(!e.secure.locked){(e=yield ae.lockDevice({device:{name:e.name}})).selected=!0;var t=k.get("devices").map((function(t){return t.name===e.name?e:t}));k.set("devices",t)}})),function(e){return i.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=k.get("devices");return o.a.createElement("div",{className:"device-list"},o.a.createElement("ul",null,t.map((function(t){return o.a.createElement("li",{key:t.name,onClick:function(){return e.lockDevice(t)}},o.a.createElement("span",null,t.name),o.a.createElement(ve,{name:t.secure.locked?"lock":"lock_open"}))}))))}}])&&Le(t.prototype,n),r&&Le(t,r),a}(r.Component),qe=N(He);function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ze(e,t,n,r,o,i,u){try{var c=e[i](u),a=c.value}catch(e){return void n(e)}c.done?t(a):Promise.resolve(a).then(r,o)}function Ge(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function u(e){ze(i,r,o,u,c,"next",e)}function c(e){ze(i,r,o,u,c,"throw",e)}u(void 0)}))}}function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){Xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ze(e,t,n){return t&&Ye(e.prototype,t),n&&Ye(e,n),e}function et(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tt(e,t)}function tt(e,t){return(tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=it(e);if(t){var o=it(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return rt(this,n)}}function rt(e,t){return!t||"object"!==Ke(t)&&"function"!=typeof t?ot(e):t}function ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function it(e){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var u,c=e[Symbol.iterator]();!(r=(u=c.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ct(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function at(e,t){var n=ut(e,2),i=n[0],u=n[1],c=t.entityName,a=t.validator,s="".concat(c,"-list-item");return function(e){et(n,e);var t=nt(n);function n(e){var r;Qe(this,n),r=t.call(this,e);var o=e.model;return r.state={input:o.$temp?{}:Je({},o),error:null,stage:o.$temp?"editor":"viewer"},r}return Ze(n,[{key:"changeInput",value:function(e,t){var n=this.state.input;n[e]=t,this.setState({input:n})}},{key:"activeInput",value:function(){this.setState({stage:"editor"})}},{key:"cancelInput",value:function(){this.props.model.$temp?this.raiseRemove():this.setState({stage:"viewer"})}},{key:"raiseSelect",value:function(){this.props.onSelect&&this.props.onSelect()}},{key:"raiseRemove",value:function(){this.props.onRemove&&this.props.onRemove()}},{key:"raiseUpdate",value:function(){var e=this.state.input;if(a){var t=a(e);if(this.setState({error:t}),t)return void console.error(t)}this.setState({stage:"viewer"}),this.props.onUpdate&&this.props.onUpdate(e)}},{key:"render",value:function(){var e=this,t=this.state.stage,n=this.props,c=n.model,a=n.selected;return o.a.createElement("li",{className:Object(r.cls)(s,a&&"active")},"editor"===t&&o.a.createElement(i,{model:c,onCancel:function(){return e.cancelInput()},onUpdate:function(){return e.raiseUpdate()},onChange:function(t,n){return e.changeInput(t,n)}}),"viewer"===t&&o.a.createElement(u,{model:c,selected:a,onSelect:function(){return e.raiseSelect()},onActive:function(){return e.activeInput()},onRemove:function(){return e.raiseRemove()}}))}}]),n}(r.Component)}function st(e,t){var n=ut(e,3),i=n[0],u=n[1],c=n[2],a=t.entityName,s=t.entityKey,f=void 0===s?"key":s,l=t.dataSource,p="".concat(a,"-list"),y=function(e){et(s,e);var t,n,r,a=nt(s);function s(e){var t;return Qe(this,s),(t=a.call(this,e)).state={model:[]},t.idgen=1,u&&(u.prototype.parent=ot(t)),c&&(c.prototype.parent=ot(t)),t}return Ze(s,[{key:"createItem",value:function(){var e=this.state.model;e.unshift({$temp:this.idgen}),this.idgen+=1,this.setState({model:e})}},{key:"selectItem",value:(r=Ge((function*(e){yield l.select(e)})),function(e){return r.apply(this,arguments)})},{key:"removeItem",value:(n=Ge((function*(e){e.$temp||(yield l.delete(e));var t=this.state.model,n=t.indexOf(e);n>=0&&(t.splice(n,1),this.setState({model:t}))})),function(e){return n.apply(this,arguments)})},{key:"updateItem",value:(t=Ge((function*(e,t){var n=yield l.update(e,t),r=this.state.model,o=r.indexOf(e);o>=0&&(r.splice(o,1,n),this.setState({model:r}))})),function(e,n){return t.apply(this,arguments)})},{key:"reconcileModel",value:function(){var e=this.state.model,t=l.source(),n=[];return e.forEach((function(e){e.$temp&&n.push(e)})),console.log("outerModel",t),t.forEach((function(t){var r=e.find((function(e){return e[f]===t[f]}));n.push(r||t)})),console.log("reconsile",n),n}},{key:"render",value:function(){var e=this,t=this.reconcileModel();return o.a.createElement("div",{className:p},u&&o.a.createElement(u,null),t.length>0&&o.a.createElement("ul",null,t.map((function(t){return o.a.createElement(i,{key:t[f]||"temp-".concat(t.$temp),model:t,selected:t.selected,onSelect:function(){return e.selectItem(t)},onRemove:function(){return e.removeItem(t)},onUpdate:function(n){return e.updateItem(t,n)}})}))),c&&o.a.createElement(c,null))}}]),s}(r.Component);return N(y)}function ft(e){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yt(e,t,n){return t&&pt(e.prototype,t),n&&pt(e,n),e}function ht(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dt(e,t)}function dt(e,t){return(dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bt(e);if(t){var o=bt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return vt(this,n)}}function vt(e,t){return!t||"object"!==ft(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _t=at([function(e){ht(n,e);var t=mt(n);function n(){return lt(this,n),t.apply(this,arguments)}return yt(n,[{key:"render",value:function(){var e=this.props,t=e.model,n=e.onChange,r=e.onUpdate,i=e.onCancel;return o.a.createElement("div",null,o.a.createElement(De,{defaultValue:t.name,onChange:function(e){return n("name",e.target.value)}}),o.a.createElement(ke,{icon:"save",onClick:r}),o.a.createElement(ke,{icon:"close",onClick:i}))}}]),n}(r.Component),function(e){ht(n,e);var t=mt(n);function n(){return lt(this,n),t.apply(this,arguments)}return yt(n,[{key:"render",value:function(){var e=this.props,t=e.model,n=e.onActive,r=e.onRemove,i=e.onSelect,u=e.selected;return o.a.createElement("div",{className:"viewer",onClick:i},o.a.createElement("div",{className:"logo"},o.a.createElement("img",null)),o.a.createElement("div",{className:"info"},o.a.createElement("div",null,t.name),u&&o.a.createElement("div",{className:"action"},o.a.createElement(ke,{size:"small",icon:"edit",onClick:n},"edit"),o.a.createElement(ke,{size:"small",icon:"delete",onClick:r},"remove"))))}}]),n}(r.Component)],{entityName:"volumn"});n(5);function gt(e,t,n,r,o,i,u){try{var c=e[i](u),a=c.value}catch(e){return void n(e)}c.done?t(a):Promise.resolve(a).then(r,o)}function wt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function u(e){gt(i,r,o,u,c,"next",e)}function c(e){gt(i,r,o,u,c,"throw",e)}u(void 0)}))}}function Ot(e){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function St(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kt(e,t){return(kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Rt(e);if(t){var o=Rt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pt(this,n)}}function Pt(e,t){return!t||"object"!==Ot(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rt(e){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xt,At,Ct=st([_t,function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kt(e,t)}(u,e);var t,n,r,i=jt(u);function u(){return Et(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"header"},o.a.createElement(De,{onChange:function(t){return e.filterVolumn(t.target.value)}}),o.a.createElement(ke,{icon:"add",onClick:function(){return e.parent.createItem()}}))}}])&&St(t.prototype,n),r&&St(t,r),u}(r.Component)],{entityName:"volumn",entityKey:"name",dataSource:{source:function(){return k.get("volumns")},select:(At=wt((function*(e){var t=k.get("volumns").map((function(t){return t.name===e.name?(e.selected=!0,e):(t.selected=!1,t)}));k.set("volumns",t);var n=k.get("devices").find((function(e){return e.selected}));yield ae.findRecords({device:{name:n.name},volumn:{name:e.name}})})),function(e){return At.apply(this,arguments)}),delete:function(e){var t=k.get("devices").find((function(e){return e.selected}));ae.killVolumn({device:{name:t.name},volumn:{name:e.name}})},update:(xt=wt((function*(e,t){var n=k.get("devices").find((function(e){return e.selected}));return yield ae.editVolumn({device:{name:n.name},volumn:t}),t})),function(e,t){return xt.apply(this,arguments)})}});function Tt(e){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function It(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ut(e,t,n){return t&&It(e.prototype,t),n&&It(e,n),e}function Nt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bt(e,t)}function Bt(e,t){return(Bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mt(e);if(t){var o=Mt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ft(this,n)}}function Ft(e,t){return!t||"object"!==Tt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mt(e){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $t=at([function(e){Nt(n,e);var t=Lt(n);function n(){return Dt(this,n),t.apply(this,arguments)}return Ut(n,[{key:"render",value:function(){var e=this.props,t=e.model,n=e.onChange,r=e.onUpdate,i=e.onCancel;return o.a.createElement("div",null,o.a.createElement(De,{placeholder:"name",defaultValue:t.name,onChange:function(e){return n("name",e.target.value)}}),o.a.createElement(De,{placeholder:"value",defaultValue:t.value,onChange:function(e){return n("value",e.target.value)}}),o.a.createElement("div",null,t.secure),o.a.createElement(ke,{icon:"save",onClick:r}),o.a.createElement(ke,{icon:"close",onClick:i}))}}]),n}(r.Component),function(e){Nt(n,e);var t=Lt(n);function n(){return Dt(this,n),t.apply(this,arguments)}return Ut(n,[{key:"render",value:function(){var e=this.props,t=e.model,n=e.onActive,r=e.onRemove,i=e.onSelect;return o.a.createElement("div",{onClick:i},o.a.createElement("div",null,"name = ",t.name),o.a.createElement("div",null,"value = ",t.value),o.a.createElement("div",null,t.secure),o.a.createElement(ke,{icon:"edit",onClick:n}),o.a.createElement(ke,{icon:"delete",onClick:r}))}}]),n}(r.Component)],{entityName:"record"});n(6);function Vt(e,t,n,r,o,i,u){try{var c=e[i](u),a=c.value}catch(e){return void n(e)}c.done?t(a):Promise.resolve(a).then(r,o)}function Ht(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function u(e){Vt(i,r,o,u,c,"next",e)}function c(e){Vt(i,r,o,u,c,"throw",e)}u(void 0)}))}}function qt(e){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gt(e,t){return(Gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xt(e);if(t){var o=Xt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Jt(this,n)}}function Jt(e,t){return!t||"object"!==qt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xt(e){return(Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qt,Yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gt(e,t)}(u,e);var t,n,r,i=Wt(u);function u(){return Kt(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){var e=this,t=k.get("volumns").find((function(e){return e.selected}));return console.log("volumn",t),t?o.a.createElement("div",{className:"header"},o.a.createElement("div",{className:"detail"},o.a.createElement("div",{className:"logo"},o.a.createElement("img",null)),o.a.createElement("div",{className:"info"},o.a.createElement("h1",null,t.name))),o.a.createElement("div",{className:"action"},o.a.createElement(ke,{icon:"add",onClick:function(){return e.parent.createItem()}},"add record"))):o.a.createElement("div",{className:"header"},"empty")}}])&&zt(t.prototype,n),r&&zt(t,r),u}(r.Component),Zt=st([$t,N(Yt)],{entityName:"record",entityKey:"id",dataSource:{source:function(){return k.get("records")},select:function(){},delete:(Qt=Ht((function*(e){var t=k.get("devices").find((function(e){return e.selected})),n=k.get("volumns").find((function(e){return e.selected})),r=k.get("records");yield ae.killRecord({device:{name:t.name},volumn:{name:n.name},record:{id:e.id}});var o=r.findIndex((function(t){return t.id===e.id}));o>=0&&k.cursor("records").splice(o,1)})),function(e){return Qt.apply(this,arguments)}),update:function(){var e=Ht((function*(e,t){var n=k.get("devices").find((function(e){return e.selected})),r=k.get("volumns").find((function(e){return e.selected})),o={type:t.type,name:t.name,value:t.value};if(e.$temp||(o.id=t.id),yield ae.editRecord({device:{name:n.name},volumn:{name:r.name},record:o}).then((function(e){o.id=e.id})),e.$temp)k.cursor("records").push(o);else{var i=k.get("records").findIndex((function(t){return t.id===e.id}));k.cursor("records").splice(i,1,o)}return t}));return function(t,n){return e.apply(this,arguments)}}()}});n(7);function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tn(e,t,n,r,o,i,u){try{var c=e[i](u),a=c.value}catch(e){return void n(e)}c.done?t(a):Promise.resolve(a).then(r,o)}function nn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rn(e,t){return(rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function on(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=cn(e);if(t){var o=cn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return un(this,n)}}function un(e,t){return!t||"object"!==en(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cn(e){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var an=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rn(e,t)}(s,e);var t,n,i,u,c,a=on(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this,e)).state={input:{code:""},error:null},t}return t=s,(n=[{key:"changeInput",value:function(e,t){var n=this.state.input;n[e]=t,this.setState({input:n})}},{key:"handleEnter",value:function(e,t){13===e&&t()}},{key:"randomCode",value:function(){throw new Error("not support")}},{key:"lockDevice",value:function(e){var t=this,n=this.state.input;return ae.lockDevice({device:{name:e.name,code:n.code}}).then((function(){})).catch((function(e){t.setState({error:e.code})}))}},{key:"unlockDevice",value:(u=function*(e){var t=this.state.input;(e=yield ae.unlockDevice({device:{name:e.name,code:t.code}})).selected=!0;var n=k.get("devices").map((function(t){return t.name===e.name?e:t}));k.set("devices",n),t.code="",this.setState({input:t})},c=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=u.apply(e,t);function i(e){tn(o,n,r,i,c,"next",e)}function c(e){tn(o,n,r,i,c,"throw",e)}i(void 0)}))},function(e){return c.apply(this,arguments)})},{key:"renderSecretPanel",value:function(e){var t=this,n=this.state,r=n.input;if(n.error,e)return!e.secure.secret&&e.total>0?o.a.createElement("div",null,o.a.createElement("h1",null,"danger"),o.a.createElement("p",null,"your device is broken")):o.a.createElement("div",null,o.a.createElement("h1",null,"create secret"),o.a.createElement("input",{type:"password",value:r.code,onChange:function(e){return t.changeInput("code",e.target.value)},onKeyUp:function(n){return t.handleEnter(n.keyCode,(function(){return t.lockDevice(e)}))}}),o.a.createElement(ke,{onClick:function(){return t.randomCode()}},"random"))}},{key:"renderAccessPanel",value:function(e){var t=this,n=this.state,r=n.input;return n.error,o.a.createElement("div",null,o.a.createElement("h1",null,"verify secret"),o.a.createElement("input",{type:"password",value:r.code,onChange:function(e){return t.changeInput("code",e.target.value)},onKeyUp:function(n){return t.handleEnter(n.keyCode,(function(){return t.unlockDevice(e)}))}}))}},{key:"render",value:function(){var e=k.get("devices").find((function(e){return e.selected})),t=!e||!e.secure.secret||e.secure.locked;return o.a.createElement("div",{className:Object(r.cls)("access-mask",!t&&"hide")},e&&e.secure.secret?this.renderAccessPanel(e):this.renderSecretPanel(e))}}])&&nn(t.prototype,n),i&&nn(t,i),s}(r.Component),sn=N(an);n(8);function fn(e){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pn(e,t){return(pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=dn(e);if(t){var o=dn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return hn(this,n)}}function hn(e,t){return!t||"object"!==fn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dn(e){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}o.a.cls=function(){var e=arguments;return e=1===arguments.length?arguments[0]:Array.prototype.slice.call(arguments),Array.isArray(e)?e.filter(Boolean).join(" "):e};var mn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pn(e,t)}(u,e);var t,n,r,i=yn(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),t=i.call(this,e),se.initialize(),t}return t=u,(n=[{key:"render",value:function(){return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"side"},o.a.createElement("div",{className:"header"},o.a.createElement("h1",null,"KeyRoll")),o.a.createElement(qe,null)),o.a.createElement("div",{className:"main"},o.a.createElement(Ct,null),o.a.createElement(Zt,null),o.a.createElement(sn,null)))}}])&&ln(t.prototype,n),r&&ln(t,r),u}(r.Component);t.default=N(mn);!function(){if("undefined"!=typeof window&&window)if(window.epii||(window.epii={}),void 0!==t&&t){var e=t.default;if(!e){var r=Object.keys(t);r.length>0&&(e=t[r[0]])}window.epii.entry=e}else console.error("settle-loader error :: __webpack_exports__ not found");n(9)}()}]);